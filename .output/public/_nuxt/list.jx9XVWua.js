import{_ as z,a as N,b as Y,c as H,d as Q}from"./DialogContent.vue.fqJqp6Fr.js";import{_ as R,a as X}from"./Label.vue.jF-i55o4.js";import{_ as ee}from"./Input.vue.yePUBz_x.js";import{_ as F}from"./index.p6ztR4X2.js";import{Y as oe,n as w,Z as te,u as se,r as M,o as g,q as $,w as t,d as _,b as e,s as o,a as b,G,H as U,L as x,M as W,$ as ne,a0 as ae,a1 as le,t as P,y as ie,a2 as re,c as I,a3 as ue,a4 as ce,a5 as de,a6 as pe,a7 as me,F as E,x as fe,v as J,a8 as _e,a9 as ge,P as he,S as Z,D as ke,aa as q,ab as ve}from"./entry.d9WDy5gl.js";import{u as h}from"./useBook.jCpj7YUk.js";import{_ as Be}from"./Header.vue.BitSch4g.js";import{_ as be,a as ye,b as Ce}from"./PopoverContent.vue.2ekzl1VX.js";import{a as $e}from"./book.GAOEFvHx.js";import{u as T}from"./fetch.-bVTNu3G.js";/**
 * @license lucide-vue-next v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=oe("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Le={class:"grid gap-4 py-4"},Ie={class:"grid grid-cols-4 items-center gap-4"},We={class:"grid grid-cols-4 items-center gap-4"},xe={class:"grid grid-cols-4 items-center gap-4"},Ve={class:"grid grid-cols-4 items-center gap-4"},De={class:"grid grid-cols-4 items-center gap-4"},Ke=w({__name:"book",emits:["update:open"],setup(m,{emit:i}){const l=te("https://etnyrefdmddqiuatswhb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0bnlyZWZkbWRkcWl1YXRzd2hiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDQ4ODc3MDIsImV4cCI6MjAyMDQ2MzcwMn0.IwIU929Y-H6JsZdvZ2QSEsmbmBLKIND7B7_a3UpRfhs"),r=se("bookOpen"),f=M(!1),d=i;async function B(){f.value=!0,await l.from("book").update({kr:h().selected.value.kr,img:h().selected.value.img,namu:h().selected.value.namu,dc:h().selected.value.dc}).eq("jp",h().selected.value.jp),f.value=!1,r.value=!1,d("update:open")}return(n,p)=>{const V=z,D=N,K=Y,y=R,C=ee,S=F,A=X,u=H,c=Q;return g(),$(c,{open:o(r),"onUpdate:open":p[5]||(p[5]=a=>r.value=!1)},{default:t(()=>[e(u,{class:"sm:max-w-[425px]"},{default:t(()=>[e(K,null,{default:t(()=>[e(V,null,{default:t(()=>[_("만화책 수정")]),_:1}),e(D,null,{default:t(()=>[_(" 만화책의 한국어 제목 및 책의 이미지를 수정할 수 있습니다. ")]),_:1})]),_:1}),b("div",Le,[b("div",Ie,[e(y,{for:"name",class:"text-right"},{default:t(()=>[_(" 일본어 제목 ")]),_:1}),e(C,{id:"name",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.jp,"onUpdate:modelValue":p[0]||(p[0]=a=>("useBook"in n?n.useBook:o(h))().selected.value.jp=a)},null,8,["modelValue"])]),b("div",We,[e(y,{for:"name",class:"text-right"},{default:t(()=>[_(" 한국어 제목 ")]),_:1}),e(C,{id:"name",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.kr,"onUpdate:modelValue":p[1]||(p[1]=a=>("useBook"in n?n.useBook:o(h))().selected.value.kr=a)},null,8,["modelValue"])]),b("div",xe,[e(y,{for:"username",class:"text-right"},{default:t(()=>[_(" 이미지 url ")]),_:1}),e(C,{id:"username",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.img,"onUpdate:modelValue":p[2]||(p[2]=a=>("useBook"in n?n.useBook:o(h))().selected.value.img=a)},null,8,["modelValue"])]),b("div",Ve,[e(y,{for:"namu",class:"text-right"},{default:t(()=>[_(" 나무위키 url ")]),_:1}),e(C,{id:"namu",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.namu,"onUpdate:modelValue":p[3]||(p[3]=a=>("useBook"in n?n.useBook:o(h))().selected.value.namu=a)},null,8,["modelValue"])]),b("div",De,[e(y,{for:"namu",class:"text-right"},{default:t(()=>[_(" dcinside id ")]),_:1}),e(C,{id:"namu",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.dc,"onUpdate:modelValue":p[4]||(p[4]=a=>("useBook"in n?n.useBook:o(h))().selected.value.dc=a)},null,8,["modelValue"])])]),e(A,null,{default:t(()=>[e(S,{onClick:B},{default:t(()=>[_(" Save changes ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),Se=w({__name:"Command",props:{modelValue:{},defaultValue:{},open:{type:Boolean},defaultOpen:{type:Boolean},searchTerm:{},multiple:{type:Boolean},disabled:{type:Boolean},name:{},dir:{},filterFunction:{type:Function},displayValue:{type:Function},asChild:{type:Boolean},as:{}},emits:["update:modelValue","update:open","update:searchTerm"],setup(m,{emit:i}){const f=G(m,i);return(d,B)=>(g(),$(o(ne),x(o(f),{open:!0,"model-value":"",class:o(W)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",d.$attrs.class??"")}),{default:t(()=>[U(d.$slots,"default")]),_:3},16,["class"]))}}),Ae=w({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{}},setup(m){const i=m;return(l,r)=>(g(),$(o(ae),x(i,{class:o(W)("py-6 text-center text-sm",l.$attrs.class??"")}),{default:t(()=>[U(l.$slots,"default")]),_:3},16,["class"]))}}),Ue=w({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},heading:{}},setup(m){const i=m;return(l,r)=>(g(),$(o(re),x(i,{class:o(W)("overflow-hidden p-1 text-foreground",l.$attrs.class??"")}),{default:t(()=>[l.heading?(g(),$(o(le),{key:0,class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:t(()=>[_(P(l.heading),1)]),_:1})):ie("",!0),U(l.$slots,"default")]),_:3},16,["class"]))}}),je={class:"flex items-center border-b px-3","cmdk-input-wrapper":""},Me={inheritAttrs:!1},Pe=w({...Me,__name:"CommandInput",props:{type:{},disabled:{type:Boolean},autoFocus:{type:Boolean},asChild:{type:Boolean},as:{}},setup(m){const i=m;return(l,r)=>(g(),I("div",je,[e(o(we),{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e(o(ue),x({...i,...l.$attrs},{"auto-focus":"",class:o(W)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",l.$attrs.class??"")}),null,16,["class"])]))}}),Oe=w({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(m,{emit:i}){const l=m,f=ce(i);return(d,B)=>(g(),$(o(pe),x({...l,...o(f)},{class:o(W)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",d.$attrs.class??""),onSelect:B[0]||(B[0]=de(()=>{},["prevent"]))}),{default:t(()=>[U(d.$slots,"default")]),_:3},16,["class"]))}}),Fe={role:"presentation"},Ze=w({__name:"CommandList",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},dismissable:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},onPlaced:{type:Function},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(m,{emit:i}){const f=G(m,i);return(d,B)=>(g(),$(o(me),x(o(f),{class:o(W)("max-h-[300px] overflow-y-auto overflow-x-hidden",d.$attrs.class??"")}),{default:t(()=>[b("div",Fe,[U(d.$slots,"default")])]),_:3},16,["class"]))}});function qe(m,i){return g(),I("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor"})])}function Te(m,i){return g(),I("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[b("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:"currentColor"})])}const Ge=w({__name:"Combobox",emits:["select"],setup(m,{emit:i}){const l=$e(),r=M(!1),f=M(""),d=i;function B(n){typeof n.detail.value=="string"&&(f.value=n.detail.value),r.value=!1,d("select",f.value)}return(n,p)=>{const V=F,D=be,K=Pe,y=Ae,C=Oe,S=Ue,A=Ze,u=Se,c=ye,a=Ce;return g(),$(a,{open:r.value,"onUpdate:open":p[0]||(p[0]=s=>r.value=s)},{default:t(()=>[e(D,{"as-child":""},{default:t(()=>[e(V,{variant:"outline",role:"combobox","aria-expanded":r.value,class:"w-[200px] justify-between"},{default:t(()=>{var s;return[_(P(f.value?(s=o(l).find(v=>v.value===f.value))==null?void 0:s.label:"Select ")+" ",1),e(o(qe),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),_:1},8,["aria-expanded"])]),_:1}),e(c,{class:"w-[200px] p-0"},{default:t(()=>[e(u,null,{default:t(()=>[e(K,{class:"h-9",placeholder:"Search "}),e(y,null,{default:t(()=>[_("No framework found.")]),_:1}),e(A,null,{default:t(()=>[e(S,null,{default:t(()=>[(g(!0),I(E,null,J(o(l),s=>(g(),$(C,{key:s.value,value:s.value,onSelect:B},{default:t(()=>[_(P(s.label)+" ",1),e(o(Te),{class:fe(o(W)("ml-auto h-4 w-4",f.value===s.value?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),Ee={class:"p-4 flex flex-col gap-4"},Je={class:"flex gap-2"},so=w({__name:"list",setup(m){const{toast:i}=_e(),l=ge(),r=M(""),f=he(()=>l.value.map(c=>{const a=q().filter(s=>s.kr===c.kr).length>0;return{...c,isGenre:a}}).splice(0,10));async function d(u){i({title:"fetchBooks",description:"books 를 가져오는중"}),await ve(u),i({title:"fetchBooks",description:"books 를 가져옴"})}function B(){d()}function n(u){d(u),r.value=u}async function p(){await T(`/api/book/${r.value}`,"$FMbvadBTOo"),d(r.value)}function V(){const u=l.value,c=u.filter(s=>s.kr&&s.img),a=u.filter(s=>!s.kr||!s.img);return{bookListWithKr:c,bookListWithoutKr:a}}function D(){const{bookListWithKr:u,bookListWithoutKr:c}=V();return c.map(s=>{const v=u.find(j=>j.jp===s.jp),{kr:k,img:L}=v||{kr:void 0,img:void 0};return{...s,kr:k,img:L}})}function K(){return D().filter(a=>a.kr)}function y(){return K().filter((a,s,v)=>s===v.findIndex(k=>k.jp===a.jp))}async function C(){y().forEach(async c=>{await Z().value.from("book").update({kr:c.kr,img:c.img}).eq("jp",c.jp)})}function S(){r.value==""?d():d(r.value)}async function A(){var s,v;const u=ke(),c=q(),a=u.filter(k=>!c.some(L=>L.kr===k.kr));for(const k of a){const L=k.namu?k.namu:k.kr,{data:j}=await T(`/api/namuWiki/${L}`,"$vlOMEK4siZ");(s=j.value)!=null&&s.gneres?(await Z().value.from("genre").insert((v=j.value)==null?void 0:v.gneres.map(O=>({kr:k.kr,genre_name:O}))),i({title:"fetchGenre",description:`${k.kr} 의 장르를 업데이트 함`})):i({title:"fetchGenre",description:`${k.kr} 의 장르를 업데이트 실패함`}),await new Promise(O=>setTimeout(O,1e3))}}return(u,c)=>{const a=Ke,s=Be,v=F,k=Ge;return g(),I("div",Ee,[e(a,{"onUpdate:open":S}),e(s,{title:"List",description:"책 리스트를 볼 수 있으며, 책 편집을 하는 화면 입니다."}),b("div",Je,[e(v,{onClick:p,disabled:o(l).length!=0},{default:t(()=>[_("수집하기")]),_:1},8,["disabled"]),e(v,{onClick:A},{default:t(()=>[_("장르 업데이트")]),_:1}),e(v,{onClick:C},{default:t(()=>[_("kr, img 업데이트")]),_:1}),e(v,{variant:"secondary",onClick:B},{default:t(()=>[_("전체 조회")]),_:1}),e(k,{onSelect:n})]),(g(!0),I(E,null,J(o(f),L=>(g(),I("div",{key:L.id},P(L.kr),1))),128))])}}});export{so as default};
