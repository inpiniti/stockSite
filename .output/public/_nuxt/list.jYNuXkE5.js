import{_ as V}from"./book.vue.GeQqZz5v.js";import{_ as N}from"./Header.vue.uizqhABI.js";import{_ as E}from"./index.7HzRVfU-.js";import{b as Z,_ as z,a as H}from"./PopoverContent.vue.wjpnOi3d.js";import{l as J,f as y,ax as M,o as f,J as v,w as r,G as w,K as B,i as e,a4 as C,ay as Q,az as Y,aA as R,d as k,t as T,Q as X,aB as ee,c as x,b as i,aC as te,aD as oe,Y as ne,aE as se,a as W,aF as ae,r as U,F as ie,O as re,P as le,aG as ce,aH as ue,aI as de,aJ as pe,C as me,u as j,af as fe,aK as _e}from"./entry.GDVCb2-q.js";import{a as he}from"./book.Jn-fh3Jt.js";import{_ as ge}from"./DataTable.vue.D1xXV19p.js";import{u as q}from"./fetch.o_zHg-E3.js";import{columns as ke}from"./columns.TEUQ3Z9g.js";import"./DialogContent.vue.fGupM_xt.js";import"./DialogFooter.vue.-cT2aiQI.js";import"./Label.vue.e6V0XtJY.js";import"./Input.vue.4bISTuRH.js";import"./useBook.7Vk7Lb4E.js";import"./DropdownMenuContent.vue.8iBx4jqP.js";import"./index.ROlaGM1V.js";import"./check.iWMOUk5T.js";import"./chevron-down.kpssjhC5.js";import"./DataTableDropDown.vue.HHvLZsTw.js";import"./more-horizontal.Z2kpi2LA.js";/**
 * @license lucide-vue-next v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=J("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ye=y({__name:"Command",props:{modelValue:{},defaultValue:{},open:{type:Boolean},defaultOpen:{type:Boolean},searchTerm:{},multiple:{type:Boolean},disabled:{type:Boolean},name:{},dir:{},filterFunction:{type:Function},displayValue:{type:Function},asChild:{type:Boolean},as:{}},emits:["update:modelValue","update:open","update:searchTerm"],setup(d,{emit:n}){const m=M(d,n);return(c,g)=>(f(),v(e(Q),B(e(m),{open:!0,"model-value":"",class:e(C)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",c.$attrs.class??"")}),{default:r(()=>[w(c.$slots,"default")]),_:3},16,["class"]))}}),Ce=y({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{}},setup(d){const n=d;return(s,p)=>(f(),v(e(Y),B(n,{class:e(C)("py-6 text-center text-sm",s.$attrs.class??"")}),{default:r(()=>[w(s.$slots,"default")]),_:3},16,["class"]))}}),be=y({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},heading:{}},setup(d){const n=d;return(s,p)=>(f(),v(e(ee),B(n,{class:e(C)("overflow-hidden p-1 text-foreground",s.$attrs.class??"")}),{default:r(()=>[s.heading?(f(),v(e(R),{key:0,class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:r(()=>[k(T(s.heading),1)]),_:1})):X("",!0),w(s.$slots,"default")]),_:3},16,["class"]))}}),Be={class:"flex items-center border-b px-3","cmdk-input-wrapper":""},Le={inheritAttrs:!1},we=y({...Le,__name:"CommandInput",props:{type:{},disabled:{type:Boolean},autoFocus:{type:Boolean},asChild:{type:Boolean},as:{}},setup(d){const n=d;return(s,p)=>(f(),x("div",Be,[i(e(ve),{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i(e(te),B({...n,...s.$attrs},{"auto-focus":"",class:e(C)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s.$attrs.class??"")}),null,16,["class"])]))}}),xe=y({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["select"],setup(d,{emit:n}){const s=d,m=oe(n);return(c,g)=>(f(),v(e(se),B({...s,...e(m)},{class:e(C)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",c.$attrs.class??""),onSelect:g[0]||(g[0]=ne(()=>{},["prevent"]))}),{default:r(()=>[w(c.$slots,"default")]),_:3},16,["class"]))}}),$e={role:"presentation"},We=y({__name:"CommandList",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},dismissable:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(d,{emit:n}){const m=M(d,n);return(c,g)=>(f(),v(e(ae),B(e(m),{class:e(C)("max-h-[300px] overflow-y-auto overflow-x-hidden",c.$attrs.class??"")}),{default:r(()=>[W("div",$e,[w(c.$slots,"default")])]),_:3},16,["class"]))}});function Ie(d,n){return f(),x("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[W("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor"})])}function Ke(d,n){return f(),x("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[W("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:"currentColor"})])}const Ae=y({__name:"Combobox",emits:["select"],setup(d,{emit:n}){const s=he(),p=U(!1),m=U(""),c=n;function g(_){typeof _.detail.value=="string"&&(m.value=_.detail.value),p.value=!1,c("select",m.value)}return(_,$)=>{const I=E,K=Z,A=we,P=Ce,D=xe,S=be,O=We,F=ye,G=z,o=H;return f(),v(o,{open:p.value,"onUpdate:open":$[0]||($[0]=t=>p.value=t)},{default:r(()=>[i(K,{"as-child":""},{default:r(()=>[i(I,{variant:"outline",role:"combobox","aria-expanded":p.value,class:"w-[200px] justify-between"},{default:r(()=>{var t;return[k(T(m.value?(t=e(s).find(u=>u.value===m.value))==null?void 0:t.label:"Select ")+" ",1),i(e(Ie),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),_:1},8,["aria-expanded"])]),_:1}),i(G,{class:"w-[200px] p-0"},{default:r(()=>[i(F,null,{default:r(()=>[i(A,{class:"h-9",placeholder:"Search "}),i(P,null,{default:r(()=>[k("No framework found.")]),_:1}),i(O,null,{default:r(()=>[i(S,null,{default:r(()=>[(f(!0),x(ie,null,re(e(s),t=>(f(),v(D,{key:t.value,value:t.value,onSelect:g},{default:r(()=>[k(T(t.label)+" ",1),i(e(Ke),{class:le(e(C)("ml-auto h-4 w-4",m.value===t.value?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),Pe={class:"p-4 flex flex-col gap-4"},De={class:"flex gap-2"},et=y({__name:"list",setup(d){const{toast:n}=ce(),s=ue().value,p=de(),m=pe(),c=U(""),g=me(()=>p.value.map(o=>{const t=s.filter(a=>a.kr===o.kr).length>0,u=m.value.find(a=>a.kr===o.kr&&a.booknum===o.booknum);return u&&(o.img=u.cover_image),{...o,isGenre:t}}));async function _(o){n({title:"fetchBooks",description:"books 를 가져오는중"}),await _e(o),n({title:"fetchBooks",description:"books 를 가져옴"})}function $(){_()}function I(o){_(o),c.value=o}async function K(){await q(`/api/book/${c.value}`,"$FMbvadBTOo"),_(c.value)}function A(){const o=p.value,t=o.filter(a=>a.kr&&a.img),u=o.filter(a=>!a.kr||!a.img);return{bookListWithKr:t,bookListWithoutKr:u}}function P(){const{bookListWithKr:o,bookListWithoutKr:t}=A();return t.map(a=>{const l=o.find(L=>L.jp===a.jp),{kr:h,img:b}=l||{kr:void 0,img:void 0};return{...a,kr:h,img:b}})}function D(){return P().filter(u=>u.kr)}function S(){return D().filter((u,a,l)=>a===l.findIndex(h=>h.jp===u.jp))}async function O(){S().forEach(async t=>{await j().value.from("book").update({kr:t.kr,img:t.img}).eq("jp",t.jp)})}function F(){c.value==""?_():_(c.value)}async function G(){var u,a;const t=fe().filter(l=>!s.some(h=>h.kr===l.kr));for(const l of t){const h=l.namu?l.namu:l.kr,{data:b}=await q(`/api/namuWiki/${h}`,"$vlOMEK4siZ");(u=b.value)!=null&&u.gneres?(await j().value.from("genre").insert((a=b.value)==null?void 0:a.gneres.map(L=>({kr:l.kr,genre_name:L}))),n({title:"fetchGenre",description:`${l.kr} 의 장르를 업데이트 함`})):n({title:"fetchGenre",description:`${l.kr} 의 장르를 업데이트 실패함`}),await new Promise(L=>setTimeout(L,1e3))}}return(o,t)=>{const u=V,a=N,l=E,h=Ae,b=ge;return f(),x("div",Pe,[i(u,{"onUpdate:open":F}),i(a,{title:"List",description:"책 리스트를 볼 수 있으며, 책 편집을 하는 화면 입니다."}),W("div",De,[i(l,{onClick:K,disabled:e(p).length!=0},{default:r(()=>[k("수집하기")]),_:1},8,["disabled"]),i(l,{onClick:G},{default:r(()=>[k("장르 업데이트")]),_:1}),i(l,{onClick:O},{default:r(()=>[k("kr, img 업데이트")]),_:1}),i(l,{variant:"secondary",onClick:$},{default:r(()=>[k("전체 조회")]),_:1}),i(h,{onSelect:I})]),i(b,{columns:e(ke),data:e(g)},null,8,["columns","data"])])}}});export{et as default};
