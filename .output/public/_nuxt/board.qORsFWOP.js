import{n as B,r as x,q as $,h as q,s as I,u as T,o as m,c as g,v as V,x as z,a as t,y as w,b as v,t as c,z as y,A as S,p as F,e as M,B as O,C as R,D as j,F as A,E as G,G as _,d as h,H as U}from"./entry.eL2vW3aL.js";import{r as J}from"./book.H1yZow-y.js";function K(e,s){const o=e.getBoundingClientRect();if(!s)return o.top>=0&&o.bottom<=window.innerHeight;const n=s.getBoundingClientRect();return o.top>=n.top&&o.bottom<=n.bottom}async function P(e){return await S(),e.value instanceof HTMLElement?e.value:e.value?document.querySelector(e.value):null}function k(e){let s=`0px 0px ${e.distance}px 0px`;e.top&&(s=`${e.distance}px 0px 0px 0px`);const o=new IntersectionObserver(n=>{n[0].isIntersecting&&(e.firstload&&e.emit(),e.firstload=!0)},{root:e.parentEl,rootMargin:s});return o.observe(e.infiniteLoading.value),o}const C=(e,s)=>{const o=e.__vccOpts||e;for(const[n,p]of s)o[n]=p;return o},W={},Q=e=>(F("data-v-d3e37633"),e=e(),M(),e),X={class:"container"},Y=Q(()=>t("div",{class:"spinner"},null,-1)),Z=[Y];function ee(e,s){return m(),g("div",X,Z)}const te=C(W,[["render",ee],["__scopeId","data-v-d3e37633"]]),ne={class:"state-error"},oe=B({__name:"InfiniteLoading",props:{top:{type:Boolean,default:!1},target:{},distance:{default:0},identifier:{},firstload:{type:Boolean,default:!0},slots:{}},emits:["infinite"],setup(e,{emit:s}){const o=e;let n=null,p=0;const r=x(null),a=x(""),{top:u,firstload:l,distance:D}=o,{identifier:L,target:H}=$(o),i={infiniteLoading:r,top:u,firstload:l,distance:D,parentEl:null,emit(){p=(i.parentEl||document.documentElement).scrollHeight,b.loading(),s("infinite",b)}},b={loading(){a.value="loading"},async loaded(){a.value="loaded";const d=i.parentEl||document.documentElement;await S(),u&&(d.scrollTop=d.scrollHeight-p),K(r.value,i.parentEl)&&i.emit()},complete(){a.value="complete",n==null||n.disconnect()},error(){a.value="error"}};return q(L,()=>{n==null||n.disconnect(),n=k(i)}),I(async()=>{i.parentEl=await P(H),n=k(i)}),T(()=>{n==null||n.disconnect()}),(d,E)=>(m(),g("div",{ref_key:"infiniteLoading",ref:r,style:{"min-height":"1px"}},[V(t("div",null,[w(d.$slots,"spinner",{},()=>[v(te)],!0)],512),[[z,a.value=="loading"]]),a.value=="complete"?w(d.$slots,"complete",{key:0},()=>{var f;return[t("span",null,c(((f=d.slots)==null?void 0:f.complete)||"No more results!"),1)]},!0):y("",!0),a.value=="error"?w(d.$slots,"error",{key:1,retry:i.emit},()=>{var f;return[t("span",ne,[t("span",null,c(((f=d.slots)==null?void 0:f.error)||"Oops something went wrong!"),1),t("button",{class:"retry",onClick:E[0]||(E[0]=(...N)=>i.emit&&i.emit(...N))},"retry")])]},!0):y("",!0)],512))}}),se=C(oe,[["__scopeId","data-v-a7077831"]]),le={class:"grid sm:grid-cols-1 md:grid-cols-2 lg:md:grid-cols-3 xl:md:grid-cols-4 gap-4 overflow-hidden"},ae={class:"relative w-full"},re={class:"absolute z-10 p-2 text-white"},ie={class:"font-bold"},ce={class:"text-sm"},de=["src"],ue=t("div",{class:"absolute top-0 left-0 w-full h-full lg:rounded-md",style:{background:`linear-gradient(\r
                to bottom,\r
                rgba(0, 0, 0, 0.5),\r
                rgba(0, 0, 0, 0) 50%\r
              )`}},null,-1),pe={class:"px-2 flex flex-col w-full"},me={class:""},fe={class:"line-clamp-3 overflow-hidden"},ve={class:"flex text-xs text-neutral-400 gap-2"},ge={class:"flex text-xs text-neutral-400 gap-2"},xe=B({__name:"board",setup(e){const s=x([]),o=x(1),n=O(()=>s.value.slice(0,o.value*20));I(async()=>{const{data:r,error:a}=await R().value.from("board").select().neq("link",null).order("date",{ascending:!1});a?console.error(a):s.value=r??[]});function p(r){o.value++,r.loaded()}return(r,a)=>{const u=j("font-awesome-icon");return m(),g("div",null,[t("div",le,[(m(!0),g(A,null,G(_(n),l=>(m(),g("div",{key:l.id,class:"w-screen"},[t("div",ae,[t("div",re,[t("div",ie,c(l.title),1),t("div",ce,c(l.writer),1)]),t("img",{class:"lg:rounded-md md:h-72 w-full object-fill",src:l.link?("replaceDomain"in r?r.replaceDomain:_(J))(l.link).replace(/co\.kr/g,"com"):""},null,8,de),ue]),t("div",pe,[t("div",me,[t("div",fe,c(l.content),1),t("div",ve,[t("div",null,[v(u,{icon:["far","calendar-check"]}),h(" "+c(l.date),1)])]),t("div",ge,[t("div",null,[v(u,{icon:["far","comment"]}),h(" "+c(l.number),1)]),t("div",null,[v(u,{icon:["far","eye"]}),h(" "+c(l.count),1)]),t("div",null,[v(u,{icon:["fas","star"]}),h(" "+c(l.recommend),1)])])])])]))),128))]),_(n).length>0?(m(),U(_(se),{key:0,onInfinite:p})):y("",!0)])}}});export{xe as default};
