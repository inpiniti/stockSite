import{_ as Q,a as R,b as H,c as ee,d as oe}from"./DialogContent.vue.JmGE4t18.js";import{_ as te,a as se}from"./Label.vue.EWQqVi2i.js";import{_ as ne}from"./Input.vue.djAC_L7p.js";import{_ as z}from"./index.a9UpbvFX.js";import{U as E,n as L,V as N,u as X,r as A,o as f,q as y,w as t,d,b as o,s as e,a as C,G as Y,H as O,L as V,M as W,X as ae,Y as le,$ as ie,t as q,y as ce,Z as re,c as j,a0 as ue,a1 as de,a2 as me,a3 as pe,a4 as fe,F as _e,x as he,v as ke,a5 as ge,a6 as ve,B as be,D as G,a7 as F,h as Be,P as ye,a8 as Ce,S as Ie}from"./entry.ioIhvyHJ.js";import{u as h}from"./DataTableDropDown.vue.vH0qjqtu.js";import{_ as we}from"./Header.vue.a7DqxCaH.js";import{_ as Le,a as $e,b as We}from"./PopoverContent.vue.g4Tdwqxm.js";import{a as Ve}from"./book.GAOEFvHx.js";import{_ as De}from"./DataTable.vue.Tia0t1L8.js";import{u as T}from"./fetch.pj4o3sD8.js";import{columns as xe}from"./columns.5GBxKvtO.js";import"./DropdownMenuContent.vue.FzmeYvyz.js";import"./index.5MUaUo9h.js";import"./check.sJRww73M.js";import"./chevron-down.BbCIy5on.js";/**
 * @license lucide-vue-next v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=E("Loader2Icon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=E("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Se={class:"grid gap-4 py-4"},Ue={class:"grid grid-cols-4 items-center gap-4"},Ze={class:"grid grid-cols-4 items-center gap-4"},Ae={class:"grid grid-cols-4 items-center gap-4"},Oe={class:"grid grid-cols-4 items-center gap-4"},je={class:"grid grid-cols-4 items-center gap-4"},Pe=L({__name:"book",emits:["update:open"],setup(m,{emit:l}){const i=N("https://etnyrefdmddqiuatswhb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0bnlyZWZkbWRkcWl1YXRzd2hiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDQ4ODc3MDIsImV4cCI6MjAyMDQ2MzcwMn0.IwIU929Y-H6JsZdvZ2QSEsmbmBLKIND7B7_a3UpRfhs"),u=X("bookOpen"),p=A(!1),c=l;async function B(){p.value=!0,await i.from("book").update({kr:h().selected.value.kr,img:h().selected.value.img,namu:h().selected.value.namu,dc:h().selected.value.dc}).eq("jp",h().selected.value.jp),p.value=!1,u.value=!1,c("update:open")}return(n,a)=>{const D=Q,x=R,M=H,I=te,w=ne,K=z,S=se,U=ee,Z=oe;return f(),y(Z,{open:e(u),"onUpdate:open":a[5]||(a[5]=k=>u.value=!1)},{default:t(()=>[o(U,{class:"sm:max-w-[425px]"},{default:t(()=>[o(M,null,{default:t(()=>[o(D,null,{default:t(()=>[d("만화책 수정")]),_:1}),o(x,null,{default:t(()=>[d(" 만화책의 한국어 제목 및 책의 이미지를 수정할 수 있습니다. ")]),_:1})]),_:1}),C("div",Se,[C("div",Ue,[o(I,{for:"name",class:"text-right"},{default:t(()=>[d(" 일본어 제목 ")]),_:1}),o(w,{id:"name",class:"col-span-3",modelValue:("useBook"in n?n.useBook:e(h))().selected.value.jp,"onUpdate:modelValue":a[0]||(a[0]=k=>("useBook"in n?n.useBook:e(h))().selected.value.jp=k)},null,8,["modelValue"])]),C("div",Ze,[o(I,{for:"name",class:"text-right"},{default:t(()=>[d(" 한국어 제목 ")]),_:1}),o(w,{id:"name",class:"col-span-3",modelValue:("useBook"in n?n.useBook:e(h))().selected.value.kr,"onUpdate:modelValue":a[1]||(a[1]=k=>("useBook"in n?n.useBook:e(h))().selected.value.kr=k)},null,8,["modelValue"])]),C("div",Ae,[o(I,{for:"username",class:"text-right"},{default:t(()=>[d(" 이미지 url ")]),_:1}),o(w,{id:"username",class:"col-span-3",modelValue:("useBook"in n?n.useBook:e(h))().selected.value.img,"onUpdate:modelValue":a[2]||(a[2]=k=>("useBook"in n?n.useBook:e(h))().selected.value.img=k)},null,8,["modelValue"])]),C("div",Oe,[o(I,{for:"namu",class:"text-right"},{default:t(()=>[d(" 나무위키 url ")]),_:1}),o(w,{id:"namu",class:"col-span-3",modelValue:("useBook"in n?n.useBook:e(h))().selected.value.namu,"onUpdate:modelValue":a[3]||(a[3]=k=>("useBook"in n?n.useBook:e(h))().selected.value.namu=k)},null,8,["modelValue"])]),C("div",je,[o(I,{for:"namu",class:"text-right"},{default:t(()=>[d(" dcinside id ")]),_:1}),o(w,{id:"namu",class:"col-span-3",modelValue:("useBook"in n?n.useBook:e(h))().selected.value.dc,"onUpdate:modelValue":a[4]||(a[4]=k=>("useBook"in n?n.useBook:e(h))().selected.value.dc=k)},null,8,["modelValue"])])]),o(S,null,{default:t(()=>[o(K,{onClick:B},{default:t(()=>[d(" Save changes ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),Je=L({__name:"Command",props:{modelValue:{},defaultValue:{},open:{type:Boolean},defaultOpen:{type:Boolean},searchTerm:{},multiple:{type:Boolean},disabled:{type:Boolean},name:{},dir:{},filterFunction:{type:Function},displayValue:{type:Function},asChild:{type:Boolean},as:{}},emits:["update:modelValue","update:open","update:searchTerm"],setup(m,{emit:l}){const p=Y(m,l);return(c,B)=>(f(),y(e(ae),V(e(p),{open:!0,"model-value":"",class:e(W)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",c.$attrs.class??"")}),{default:t(()=>[O(c.$slots,"default")]),_:3},16,["class"]))}}),Fe=L({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{}},setup(m){const l=m;return(i,u)=>(f(),y(e(le),V(l,{class:e(W)("py-6 text-center text-sm",i.$attrs.class??"")}),{default:t(()=>[O(i.$slots,"default")]),_:3},16,["class"]))}}),qe=L({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},heading:{}},setup(m){const l=m;return(i,u)=>(f(),y(e(re),V(l,{class:e(W)("overflow-hidden p-1 text-foreground",i.$attrs.class??"")}),{default:t(()=>[i.heading?(f(),y(e(ie),{key:0,class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:t(()=>[d(q(i.heading),1)]),_:1})):ce("",!0),O(i.$slots,"default")]),_:3},16,["class"]))}}),ze={class:"flex items-center border-b px-3","cmdk-input-wrapper":""},Ge={inheritAttrs:!1},Te=L({...Ge,__name:"CommandInput",props:{type:{},disabled:{type:Boolean},autoFocus:{type:Boolean},asChild:{type:Boolean},as:{}},setup(m){const l=m;return(i,u)=>(f(),j("div",ze,[o(e(Ke),{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}),o(e(ue),V({...l,...i.$attrs},{"auto-focus":"",class:e(W)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i.$attrs.class??"")}),null,16,["class"])]))}}),Ee=L({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(m,{emit:l}){const i=m,p=de(l);return(c,B)=>(f(),y(e(pe),V({...i,...e(p)},{class:e(W)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",c.$attrs.class??""),onSelect:B[0]||(B[0]=me(()=>{},["prevent"]))}),{default:t(()=>[O(c.$slots,"default")]),_:3},16,["class"]))}}),Ne={role:"presentation"},Xe=L({__name:"CommandList",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},dismissable:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},onPlaced:{type:Function},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(m,{emit:l}){const p=Y(m,l);return(c,B)=>(f(),y(e(fe),V(e(p),{class:e(W)("max-h-[300px] overflow-y-auto overflow-x-hidden",c.$attrs.class??"")}),{default:t(()=>[C("div",Ne,[O(c.$slots,"default")])]),_:3},16,["class"]))}});function Ye(m,l){return f(),j("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[C("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor"})])}function Qe(m,l){return f(),j("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[C("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:"currentColor"})])}const Re=L({__name:"Combobox",emits:["select"],setup(m,{emit:l}){const i=Ve(),u=A(!1),p=A(""),c=l;function B(n){typeof n.detail.value=="string"&&(p.value=n.detail.value),u.value=!1,c("select",p.value)}return(n,a)=>{const D=z,x=Le,M=Te,I=Fe,w=Ee,K=qe,S=Xe,U=Je,Z=$e,k=We;return f(),y(k,{open:u.value,"onUpdate:open":a[0]||(a[0]=s=>u.value=s)},{default:t(()=>[o(x,{"as-child":""},{default:t(()=>[o(D,{variant:"outline",role:"combobox","aria-expanded":u.value,class:"w-[200px] justify-between"},{default:t(()=>{var s;return[d(q(p.value?(s=e(i).find(r=>r.value===p.value))==null?void 0:s.label:"Select ")+" ",1),o(e(Ye),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),_:1},8,["aria-expanded"])]),_:1}),o(Z,{class:"w-[200px] p-0"},{default:t(()=>[o(U,null,{default:t(()=>[o(M,{class:"h-9",placeholder:"Search "}),o(I,null,{default:t(()=>[d("No framework found.")]),_:1}),o(S,null,{default:t(()=>[o(K,null,{default:t(()=>[(f(!0),j(_e,null,ke(e(i),s=>(f(),y(w,{key:s.value,value:s.value,onSelect:B},{default:t(()=>[d(q(s.label)+" ",1),o(e(Qe),{class:he(e(W)("ml-auto h-4 w-4",p.value===s.value?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),He={class:"p-4 flex flex-col gap-4"},eo={class:"flex gap-2"},go=L({__name:"list",setup(m){const{toast:l}=ge(),i=N("https://etnyrefdmddqiuatswhb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0bnlyZWZkbWRkcWl1YXRzd2hiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDQ4ODc3MDIsImV4cCI6MjAyMDQ2MzcwMn0.IwIU929Y-H6JsZdvZ2QSEsmbmBLKIND7B7_a3UpRfhs"),u=ve(),p=X("clicked",()=>!1),c=A(""),B=A(!1);be(()=>{a();const s=G(),r=F(),g=s.filter(_=>!r.some(v=>v.kr===_.kr));console.log(g)}),Be(p,()=>{a()});const n=ye(()=>u.value.map(s=>{const r=F().filter(g=>g.kr===s.kr).length>0;return{...s,isGenre:r}}));async function a(s){l({title:"fetchBooks",description:"books 를 가져오는중"}),await Ce(s),l({title:"fetchBooks",description:"books 를 가져옴"})}function D(){a()}function x(s){a(s),c.value=s}async function M(){await T(`/api/book/${c.value}`,"$FMbvadBTOo"),a(c.value)}function I(){const s=u.value,r=s.filter(_=>_.kr),g=s.filter(_=>!_.kr);return{bookListWithKr:r,bookListWithoutKr:g}}function w(){const{bookListWithKr:s,bookListWithoutKr:r}=I();return r.map(_=>{const v=s.find(P=>P.jp===_.jp),{kr:b,img:$}=v||{kr:void 0,img:void 0};return{..._,kr:b,img:$}})}function K(){return w().filter(g=>g.kr)}function S(){return K().filter((g,_,v)=>_===v.findIndex(b=>b.jp===g.jp))}async function U(){B.value=!0,S().forEach(async r=>{await i.from("book").update({kr:r.kr,img:r.img}).eq("jp",r.jp)}),B.value=!1}function Z(){c.value==""?a():a(c.value)}async function k(){var _,v;const s=G(),r=F(),g=s.filter(b=>!r.some($=>$.kr===b.kr));for(const b of g){const $=b.namu?b.namu:b.kr,{data:P}=await T(`/api/namuWiki/${$}`,"$vlOMEK4siZ");(_=P.value)!=null&&_.gneres?(await Ie().value.from("genre").insert((v=P.value)==null?void 0:v.gneres.map(J=>({kr:b.kr,genre_name:J}))),l({title:"fetchGenre",description:`${b.kr} 의 장르를 업데이트 함`})):l({title:"fetchGenre",description:`${b.kr} 의 장르를 업데이트 실패함`}),await new Promise(J=>setTimeout(J,1e3))}}return(s,r)=>{const g=Pe,_=we,v=z,b=Re,$=De;return f(),j("div",He,[o(g,{"onUpdate:open":Z}),o(_,{title:"List",description:"책 리스트를 볼 수 있으며, 책 편집을 하는 화면 입니다."}),C("div",eo,[o(v,{onClick:M,disabled:e(n).length!=0},{default:t(()=>[d("수집하기")]),_:1},8,["disabled"]),o(v,{onClick:k},{default:t(()=>[d("장르 업데이트")]),_:1}),e(B)?(f(),y(v,{key:0,disabled:""},{default:t(()=>[o(e(Me),{class:"w-4 h-4 mr-2 animate-spin"}),d(" Please wait ")]),_:1})):(f(),y(v,{key:1,onClick:U},{default:t(()=>[d("kr, img 업데이트")]),_:1})),o(v,{variant:"secondary",onClick:D},{default:t(()=>[d("전체 조회")]),_:1}),o(b,{onSelect:x})]),o($,{columns:e(xe),data:e(n)},null,8,["columns","data"])])}}});export{go as default};
