import{_ as J,a as T,b as z,c as N,d as Q}from"./DialogContent.vue.SdVrpw_C.js";import{_ as Y}from"./DialogFooter.vue.TRaIf2YU.js";import{_ as H}from"./Label.vue.9nvW5rA_.js";import{_ as R}from"./Input.vue.s34YmvZq.js";import{_ as Z}from"./index.bMcRmAll.js";import{l as X,f as w,ax as ee,j as oe,r as P,o as k,J as $,w as s,b as e,d as g,a as B,i as o,ay as G,G as O,K as W,a4 as L,az as te,aA as se,aB as ne,t as F,Q as ae,aC as le,c as M,aD as ie,aE as re,Y as ue,aF as ce,aG as de,F as me,O as pe,P as fe,aH as _e,aI as ge,aJ as he,aK as ke,C as ve,u as q,af as Be,aL as be}from"./entry.4ne-HkFC.js";import{u as h}from"./DataTableDropDown.vue.77ebrJ_A.js";import{_ as ye}from"./Header.vue.DcuxAkjP.js";import{b as Ce,_ as $e,a as we}from"./PopoverContent.vue.r3MWwTJg.js";import{a as Le}from"./book.Jn-fh3Jt.js";import{_ as Ie}from"./DataTable.vue.ipjLtVKQ.js";import{u as E}from"./fetch.XvOfu5jQ.js";import{columns as We}from"./columns.3QlHf8UX.js";import"./DropdownMenuContent.vue.nqqDbPVh.js";import"./more-horizontal.WKctLcAA.js";import"./index.os4ACAoZ.js";import"./check.7e-sBMIg.js";import"./chevron-down.vL9N8ryE.js";/**
 * @license lucide-vue-next v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=X("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ve={class:"grid gap-4 py-4"},De={class:"grid grid-cols-4 items-center gap-4"},Ke={class:"grid grid-cols-4 items-center gap-4"},Ae={class:"grid grid-cols-4 items-center gap-4"},Ue={class:"grid grid-cols-4 items-center gap-4"},Se={class:"grid grid-cols-4 items-center gap-4"},je=w({__name:"book",emits:["update:open"],setup(p,{emit:l}){const i=ee("https://etnyrefdmddqiuatswhb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0bnlyZWZkbWRkcWl1YXRzd2hiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDQ4ODc3MDIsImV4cCI6MjAyMDQ2MzcwMn0.IwIU929Y-H6JsZdvZ2QSEsmbmBLKIND7B7_a3UpRfhs"),u=oe("bookOpen"),f=P(!1),c=l;async function v(){f.value=!0,await i.from("book").update({kr:h().selected.value.kr,img:h().selected.value.img,namu:h().selected.value.namu,dc:h().selected.value.dc}).eq("jp",h().selected.value.jp),f.value=!1,u.value=!1,c("update:open")}return(n,d)=>{const x=J,V=T,D=z,b=H,y=R,K=Z,A=Y,U=N,S=Q;return k(),$(S,{open:o(u),"onUpdate:open":d[5]||(d[5]=t=>u.value=!1)},{default:s(()=>[e(U,{class:"sm:max-w-[425px]"},{default:s(()=>[e(D,null,{default:s(()=>[e(x,null,{default:s(()=>[g("만화책 수정")]),_:1}),e(V,null,{default:s(()=>[g(" 만화책의 한국어 제목 및 책의 이미지를 수정할 수 있습니다. ")]),_:1})]),_:1}),B("div",Ve,[B("div",De,[e(b,{for:"name",class:"text-right"},{default:s(()=>[g(" 일본어 제목 ")]),_:1}),e(y,{id:"name",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.jp,"onUpdate:modelValue":d[0]||(d[0]=t=>("useBook"in n?n.useBook:o(h))().selected.value.jp=t)},null,8,["modelValue"])]),B("div",Ke,[e(b,{for:"name",class:"text-right"},{default:s(()=>[g(" 한국어 제목 ")]),_:1}),e(y,{id:"name",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.kr,"onUpdate:modelValue":d[1]||(d[1]=t=>("useBook"in n?n.useBook:o(h))().selected.value.kr=t)},null,8,["modelValue"])]),B("div",Ae,[e(b,{for:"username",class:"text-right"},{default:s(()=>[g(" 이미지 url ")]),_:1}),e(y,{id:"username",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.img,"onUpdate:modelValue":d[2]||(d[2]=t=>("useBook"in n?n.useBook:o(h))().selected.value.img=t)},null,8,["modelValue"])]),B("div",Ue,[e(b,{for:"namu",class:"text-right"},{default:s(()=>[g(" 나무위키 url ")]),_:1}),e(y,{id:"namu",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.namu,"onUpdate:modelValue":d[3]||(d[3]=t=>("useBook"in n?n.useBook:o(h))().selected.value.namu=t)},null,8,["modelValue"])]),B("div",Se,[e(b,{for:"namu",class:"text-right"},{default:s(()=>[g(" dcinside id ")]),_:1}),e(y,{id:"namu",class:"col-span-3",modelValue:("useBook"in n?n.useBook:o(h))().selected.value.dc,"onUpdate:modelValue":d[4]||(d[4]=t=>("useBook"in n?n.useBook:o(h))().selected.value.dc=t)},null,8,["modelValue"])])]),e(A,null,{default:s(()=>[e(K,{onClick:v},{default:s(()=>[g(" Save changes ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),Oe=w({__name:"Command",props:{modelValue:{},defaultValue:{},open:{type:Boolean},defaultOpen:{type:Boolean},searchTerm:{},multiple:{type:Boolean},disabled:{type:Boolean},name:{},dir:{},filterFunction:{type:Function},displayValue:{type:Function},asChild:{type:Boolean},as:{}},emits:["update:modelValue","update:open","update:searchTerm"],setup(p,{emit:l}){const f=G(p,l);return(c,v)=>(k(),$(o(te),W(o(f),{open:!0,"model-value":"",class:o(L)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",c.$attrs.class??"")}),{default:s(()=>[O(c.$slots,"default")]),_:3},16,["class"]))}}),Me=w({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{}},setup(p){const l=p;return(i,u)=>(k(),$(o(se),W(l,{class:o(L)("py-6 text-center text-sm",i.$attrs.class??"")}),{default:s(()=>[O(i.$slots,"default")]),_:3},16,["class"]))}}),Pe=w({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},heading:{}},setup(p){const l=p;return(i,u)=>(k(),$(o(le),W(l,{class:o(L)("overflow-hidden p-1 text-foreground",i.$attrs.class??"")}),{default:s(()=>[i.heading?(k(),$(o(ne),{key:0,class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:s(()=>[g(F(i.heading),1)]),_:1})):ae("",!0),O(i.$slots,"default")]),_:3},16,["class"]))}}),Fe={class:"flex items-center border-b px-3","cmdk-input-wrapper":""},Ze={inheritAttrs:!1},qe=w({...Ze,__name:"CommandInput",props:{type:{},disabled:{type:Boolean},autoFocus:{type:Boolean},asChild:{type:Boolean},as:{}},setup(p){const l=p;return(i,u)=>(k(),M("div",Fe,[e(o(xe),{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e(o(ie),W({...l,...i.$attrs},{"auto-focus":"",class:o(L)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i.$attrs.class??"")}),null,16,["class"])]))}}),Ee=w({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["select"],setup(p,{emit:l}){const i=p,f=re(l);return(c,v)=>(k(),$(o(ce),W({...i,...o(f)},{class:o(L)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",c.$attrs.class??""),onSelect:v[0]||(v[0]=ue(()=>{},["prevent"]))}),{default:s(()=>[O(c.$slots,"default")]),_:3},16,["class"]))}}),Ge={role:"presentation"},Je=w({__name:"CommandList",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},dismissable:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(p,{emit:l}){const f=G(p,l);return(c,v)=>(k(),$(o(de),W(o(f),{class:o(L)("max-h-[300px] overflow-y-auto overflow-x-hidden",c.$attrs.class??"")}),{default:s(()=>[B("div",Ge,[O(c.$slots,"default")])]),_:3},16,["class"]))}});function Te(p,l){return k(),M("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor"})])}function ze(p,l){return k(),M("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:"currentColor"})])}const Ne=w({__name:"Combobox",emits:["select"],setup(p,{emit:l}){const i=Le(),u=P(!1),f=P(""),c=l;function v(n){typeof n.detail.value=="string"&&(f.value=n.detail.value),u.value=!1,c("select",f.value)}return(n,d)=>{const x=Z,V=Ce,D=qe,b=Me,y=Ee,K=Pe,A=Je,U=Oe,S=$e,t=we;return k(),$(t,{open:u.value,"onUpdate:open":d[0]||(d[0]=a=>u.value=a)},{default:s(()=>[e(V,{"as-child":""},{default:s(()=>[e(x,{variant:"outline",role:"combobox","aria-expanded":u.value,class:"w-[200px] justify-between"},{default:s(()=>{var a;return[g(F(f.value?(a=o(i).find(_=>_.value===f.value))==null?void 0:a.label:"Select ")+" ",1),e(o(Te),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),_:1},8,["aria-expanded"])]),_:1}),e(S,{class:"w-[200px] p-0"},{default:s(()=>[e(U,null,{default:s(()=>[e(D,{class:"h-9",placeholder:"Search "}),e(b,null,{default:s(()=>[g("No framework found.")]),_:1}),e(A,null,{default:s(()=>[e(K,null,{default:s(()=>[(k(!0),M(me,null,pe(o(i),a=>(k(),$(y,{key:a.value,value:a.value,onSelect:v},{default:s(()=>[g(F(a.label)+" ",1),e(o(ze),{class:fe(o(L)("ml-auto h-4 w-4",f.value===a.value?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}}),Qe={class:"p-4 flex flex-col gap-4"},Ye={class:"flex gap-2"},go=w({__name:"list",setup(p){const{toast:l}=_e(),i=ge().value,u=he(),f=ke(),c=P(""),v=ve(()=>u.value.map(t=>{const a=i.filter(r=>r.kr===t.kr).length>0,_=f.value.find(r=>r.kr===t.kr&&r.booknum===t.booknum);return _&&(t.img=_.cover_image),{...t,isGenre:a}}));async function n(t){l({title:"fetchBooks",description:"books 를 가져오는중"}),await be(t),l({title:"fetchBooks",description:"books 를 가져옴"})}function d(){n()}function x(t){n(t),c.value=t}async function V(){await E(`/api/book/${c.value}`,"$FMbvadBTOo"),n(c.value)}function D(){const t=u.value,a=t.filter(r=>r.kr&&r.img),_=t.filter(r=>!r.kr||!r.img);return{bookListWithKr:a,bookListWithoutKr:_}}function b(){const{bookListWithKr:t,bookListWithoutKr:a}=D();return a.map(r=>{const m=t.find(j=>j.jp===r.jp),{kr:C,img:I}=m||{kr:void 0,img:void 0};return{...r,kr:C,img:I}})}function y(){return b().filter(_=>_.kr)}function K(){return y().filter((_,r,m)=>r===m.findIndex(C=>C.jp===_.jp))}async function A(){K().forEach(async a=>{await q().value.from("book").update({kr:a.kr,img:a.img}).eq("jp",a.jp)})}function U(){c.value==""?n():n(c.value)}async function S(){var _,r;const a=Be().filter(m=>!i.some(C=>C.kr===m.kr));for(const m of a){const C=m.namu?m.namu:m.kr,{data:I}=await E(`/api/namuWiki/${C}`,"$vlOMEK4siZ");(_=I.value)!=null&&_.gneres?(await q().value.from("genre").insert((r=I.value)==null?void 0:r.gneres.map(j=>({kr:m.kr,genre_name:j}))),l({title:"fetchGenre",description:`${m.kr} 의 장르를 업데이트 함`})):l({title:"fetchGenre",description:`${m.kr} 의 장르를 업데이트 실패함`}),await new Promise(j=>setTimeout(j,1e3))}}return(t,a)=>{const _=je,r=ye,m=Z,C=Ne,I=Ie;return k(),M("div",Qe,[e(_,{"onUpdate:open":U}),e(r,{title:"List",description:"책 리스트를 볼 수 있으며, 책 편집을 하는 화면 입니다."}),B("div",Ye,[e(m,{onClick:V,disabled:o(u).length!=0},{default:s(()=>[g("수집하기")]),_:1},8,["disabled"]),e(m,{onClick:S},{default:s(()=>[g("장르 업데이트")]),_:1}),e(m,{onClick:A},{default:s(()=>[g("kr, img 업데이트")]),_:1}),e(m,{variant:"secondary",onClick:d},{default:s(()=>[g("전체 조회")]),_:1}),e(C,{onSelect:x})]),e(I,{columns:o(We),data:o(v)},null,8,["columns","data"])])}}});export{go as default};
