import{_ as D,a as C,b as $,c as J,d as M}from"./DialogContent.vue.a-1XCd2n.js";import{_ as Z}from"./DialogFooter.vue.KlUNe-An.js";import{_ as j}from"./Label.vue.HhelblZf.js";import{_ as L}from"./Input.vue.U_W0-rrI.js";import{_ as S}from"./index.jI9725Rl.js";import{M as z,dm as N,bJ as O,aM as v,aE as q,s as Q,bx as t,I as o,H as n,v as d,bc as l,b3 as R,cs as W,dn as X,dp as Y}from"./entry.kujcSJSR.js";import{u as s}from"./useBook.MJQSOsm7.js";const E={class:"grid gap-4 py-4"},F={class:"grid grid-cols-4 items-center gap-4"},H={class:"grid grid-cols-4 items-center gap-4"},T={class:"grid grid-cols-4 items-center gap-4"},A={class:"grid grid-cols-4 items-center gap-4"},G={class:"grid grid-cols-4 items-center gap-4"},K={class:"grid grid-cols-4 items-center gap-4"},P={class:"grid grid-cols-4 items-center gap-4"},x={class:"grid grid-cols-4 items-center gap-4"},ee={class:"grid grid-cols-4 items-center gap-4"},ie=z({__name:"book",emits:["update:open"],setup(se,{emit:g}){const m=N("https://etnyrefdmddqiuatswhb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0bnlyZWZkbWRkcWl1YXRzd2hiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDQ4ODc3MDIsImV4cCI6MjAyMDQ2MzcwMn0.IwIU929Y-H6JsZdvZ2QSEsmbmBLKIND7B7_a3UpRfhs"),c=O("bookOpen"),f=v(!1),p=v(!1),B=g;async function V(){f.value=!0,await m.from("book").update({kr:s().selected.value.kr,img:s().selected.value.img}).eq("jp",s().selected.value.jp);const{data:e,error:a}=await m.from("book_info").select("*").eq("kr",s().selected.value.kr);e&&e.length>0?await m.from("book_info").update({author:s().selected.value.author,publisher:s().selected.value.publisher,description:s().selected.value.description,summary:s().selected.value.summary,dc:s().selected.value.dc,namu:s().selected.value.namu}).eq("kr",s().selected.value.kr):await m.from("book_info").insert([{kr:s().selected.value.kr,author:s().selected.value.author,publisher:s().selected.value.publisher,description:s().selected.value.description,summary:s().selected.value.summary,dc:s().selected.value.dc,namu:s().selected.value.namu}]),await W(),await X(),f.value=!1,c.value=!1,B("update:open")}async function _(){p.value=!0;try{await fetch(`/api/namuWiki/${s().selected.value.namu}`),await Y()}catch(e){console.error(e)}finally{p.value=!1}}return(e,a)=>{const b=D,h=C,I=$,i=j,r=L,k=S,y=Z,U=J,w=M;return q(),Q(w,{open:l(c),"onUpdate:open":a[9]||(a[9]=u=>c.value=!1)},{default:t(()=>[o(U,{class:"sm:max-w-[425px]"},{default:t(()=>[o(I,null,{default:t(()=>[o(b,null,{default:t(()=>[n("만화책 수정")]),_:1}),o(h,null,{default:t(()=>[n(" 만화책의 한국어 제목 및 책의 이미지를 수정할 수 있습니다. ")]),_:1})]),_:1}),d("div",E,[d("div",F,[o(i,{for:"name",class:"text-right"},{default:t(()=>[n(" 일본어 제목 ")]),_:1}),o(r,{id:"name",class:"col-span-3",modelValue:("useBook"in e?e.useBook:l(s))().selected.value.jp,"onUpdate:modelValue":a[0]||(a[0]=u=>("useBook"in e?e.useBook:l(s))().selected.value.jp=u)},null,8,["modelValue"])]),d("div",H,[o(i,{for:"name",class:"text-right"},{default:t(()=>[n(" 한국어 제목 ")]),_:1}),o(r,{id:"name",class:"col-span-3",modelValue:("useBook"in e?e.useBook:l(s))().selected.value.kr,"onUpdate:modelValue":a[1]||(a[1]=u=>("useBook"in e?e.useBook:l(s))().selected.value.kr=u)},null,8,["modelValue"])]),d("div",T,[o(i,{for:"username",class:"text-right"},{default:t(()=>[n(" 이미지 url ")]),_:1}),o(r,{id:"username",class:"col-span-3",modelValue:("useBook"in e?e.useBook:l(s))().selected.value.img,"onUpdate:modelValue":a[2]||(a[2]=u=>("useBook"in e?e.useBook:l(s))().selected.value.img=u)},null,8,["modelValue"])]),d("div",A,[o(i,{for:"namu",class:"text-right"},{default:t(()=>[n(" 나무위키 url ")]),_:1}),o(r,{id:"namu",class:"col-span-3",modelValue:("useBook"in e?e.useBook:l(s))().selected.value.namu,"onUpdate:modelValue":a[3]||(a[3]=u=>("useBook"in e?e.useBook:l(s))().selected.value.namu=u)},null,8,["modelValue"])]),d("div",G,[o(i,{for:"namu",class:"text-right"},{default:t(()=>[n(" dcinside id ")]),_:1}),o(r,{id:"namu",class:"col-span-3",modelValue:("useBook"in e?e.useBook:l(s))().selected.value.dc,"onUpdate:modelValue":a[4]||(a[4]=u=>("useBook"in e?e.useBook:l(s))().selected.value.dc=u)},null,8,["modelValue"])]),d("div",K,[o(i,{for:"namu",class:"text-right"},{default:t(()=>[n(" 저자 ")]),_:1}),o(r,{id:"namu",class:"col-span-3",modelValue:("useBook"in e?e.useBook:l(s))().selected.value.author,"onUpdate:modelValue":a[5]||(a[5]=u=>("useBook"in e?e.useBook:l(s))().selected.value.author=u)},null,8,["modelValue"])]),d("div",P,[o(i,{for:"namu",class:"text-right"},{default:t(()=>[n(" 출판사 ")]),_:1}),o(r,{id:"namu",class:"col-span-3",modelValue:("useBook"in e?e.useBook:l(s))().selected.value.publisher,"onUpdate:modelValue":a[6]||(a[6]=u=>("useBook"in e?e.useBook:l(s))().selected.value.publisher=u)},null,8,["modelValue"])]),d("div",x,[o(i,{for:"namu",class:"text-right"},{default:t(()=>[n(" 요약 ")]),_:1}),o(r,{id:"namu",class:"col-span-3",modelValue:("useBook"in e?e.useBook:l(s))().selected.value.description,"onUpdate:modelValue":a[7]||(a[7]=u=>("useBook"in e?e.useBook:l(s))().selected.value.description=u)},null,8,["modelValue"])]),d("div",ee,[o(i,{for:"namu",class:"text-right"},{default:t(()=>[n(" 줄거리 ")]),_:1}),o(r,{id:"namu",class:"col-span-3",modelValue:("useBook"in e?e.useBook:l(s))().selected.value.summary,"onUpdate:modelValue":a[8]||(a[8]=u=>("useBook"in e?e.useBook:l(s))().selected.value.summary=u)},null,8,["modelValue"])])]),o(y,null,{default:t(()=>[o(k,{variant:"secondary",onClick:_,disabled:!("useBook"in e?e.useBook:l(s))().selected.value.namu},{default:t(()=>[n(R(l(p)?"Uploading...":"Cover Image Upload"),1)]),_:1},8,["disabled"]),o(k,{onClick:V},{default:t(()=>[n("Save changes")]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}});export{ie as _};
